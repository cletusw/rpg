<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href='../rpg-animation/rpg-animation.html'>
<link rel="import" href="../rpg-sprite/rpg-sprite.html">

<polymer-element name="rpg-animated-sprite" extends="rpg-sprite" attributes="src">
  <template>
    <style>
      /* @polyfill :host > * */
      ::content > * {
        position: absolute;
        top: 0;
        left: 0;
      }
    </style>
    <rpg-animation id="animation" src="{{src}}" currentAnimation="{{currentAnimation}}"></rpg-animation>
    <shadow></shadow>
  </template>
  <script>
    Polymer('rpg-animated-sprite', {
      currentAnimation: 'idle-down',
      oldDirection: 'down',
      directionChanged: function(oldValue) {
        this.oldDirection = oldValue;
        this.currentAnimation = this.direction ? 'walk-' + this.direction : 'idle-' + this.oldDirection;
      }
    });
  </script>
</polymer-element>
